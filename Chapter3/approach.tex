% !TEX root = ../thesis.tex
\chapter{Approach}
\label{ch:approach}
% **************************** Define Graphics Path **************************
\ifpdf
\graphicspath{{Chapter3/Figs/Raster/}{Chapter3/Figs/PDF/}{Chapter3/Figs/}}
\else
\graphicspath{{Chapter3/Figs/Vector/}{Chapter3/Figs/}}
\fi

\section{Introduction}
\label{sec:approachIntro}
Despite the importance of crowd monitoring in mass gathering events, the literature review in the previous chapter has identified several gaps in the research, especially in crowd modelling. Most state-of-art crowd monitoring techniques do not incorporate a typology to identify and distinguish different types of crowd. In other words, they lack the capability to make distinction of different crowd types that can occur in a mass gathering event. To address this issue, our proposed approach employs one of the most famous existing works on definition of crowd types in emergency management - the \citet{Berlonghi1995}'s model. Our approach also automates the classification of crowd type by considering the emotional conditions of the crowd. Those novelty attempts are integrated into a complete framework for real-time crowd monitoring, which will be discussed in detail in this chapter.

This chapter is structured as follow. Firstly, the overview of our proposed crowd monitoring framework will be introduced. Then each component in the framework will be discussed in the following sections. The chapter ends with the conclusion which will give a summarised look at the framework.

\section{An Overview of the Crowd Monitoring Framework}

The literature review in Chapter \ref{ch:litReview} has summarised that most of the state-of-art crowd monitoring approaches are focusing on using computer vision to automate the analysis of CCTV system. The literature review has also noted several limitations of the computer vision technique, such as the effect of obstacles and low lighting condition. With the rapid development of mobile computing and the increasing popularity of mobile devices, mobile sensing seems to be a more potential technique to collect contextual data for crowd monitoring, for example GPS receivers and accelerometers. Context data refers to all the knowledge that is related to a crowd. Context data can be at raw level such as the acceleration and rotational forces captured by accelerometer integrated in a participant's mobile phone, or at high level such as the current activity that user is performing.

Apart from the ``hard sensors'', the literature review also highlights that another type of information source known as the ``soft sensor'' can be used to detect the occurrence of stampede in a crowd which is the social media \citep{Ramesh2014}. The use of social media analysis for crowd monitoring has been introduced in a related work by \citet{DelirHaghighi2013}. It has the great advantage of feasibility as it only relies on the software and no additional hardware is required to be installed. Despite this strength, our literature review shows that very limited works have been done to utilize social media to support emergency management.

Secondly, another finding from the literature review is that the actual behaviour of a crowd depends largely on the emotions of the participants \citep{Kornblum2011, jasper2011emotions}. For that reason, it is essential for a crowd monitoring approach to consider the influence of emotions in the crowd. Although human emotion is an abstract concept and very difficult to measure with ``hard sensors'', it is possible to capture the emotion of a person from the verbal expressions, such as text \citep{alm2005emotions} or speech \citep{sobin1999emotion}. This is where social media further proves its advantage over the ``hard sensors''. By applying analysis on the social media, we can capture the emotions in a crowd, thus enabling the inference of the crowd's condition. For that reason, in this project, we would like to propose a crowd monitoring framework that employs the emotion analysis of social media to support emergency management in mass gatherings. 

Finally, the literature review also reveals another gap in the research that is the limitation of the crowd modelling employed in crowd monitoring approaches. Most existing crowd monitoring techniques do not base on any crowd model that can distinguish between different crowd types and identify the exact crowd type is happening without the interpretation of human. By exploring broader into other disciplines, our literature review points out several notable works on crowd modelling and classification in the police literature and public safely science. Among those works, \citet{Berlonghi1995}'s work stands out as the most commonly adopted model by the emergency management bureaus worldwide. Our proposed crowd monitoring framework is established on the \citet{Berlonghi1995}'s model which consists of eleven different crowd types. Yet, a systematic approach to classify one crowd into those types is challenging because \citet{Berlonghi1995}'s model only describes the crowd types and there is no attribute defined in the existing model to differentiate between them. Therefore, in our approach, we would like to propose a mapping model that connects the emotion model with crowd model, enabling the the fuzzy classification of crowd type by emotions. The reason fuzzy logic is utilized in our approach is because of its capability of representing multiple truths rather than the absolute true or false in classical logic. Since many crowd types can exist in one large crowd \citep{Berlonghi1995}, fuzzy logic is able to calculate the degree of membership of each crowd type in a particular crowd.

In conclusion, our proposed approach will address the gaps that are identified in the previous chapters by: 
\begin{inparaenum}[i)]
\item incorporating social media as the information source for context data;
\item capturing the emotions of a crowd by analysing the context data;
\item identifying the type of a crowd by applying fuzzy rule based inference to the crowd emotions
\end{inparaenum}. These objectives can be integrated together in a complete process as illustrated by Figure \ref{fig:processOverview}. Social media is firstly probed to get the context data at the raw level. This raw data is then processed in an emotion analysis to extract high level context data, that is the emotional states of the crowd. These emotional states are in turn used as the attributes or features to classify a crowd into a specific type.

\begin{figure}[htb!] 
\centering    
\includegraphics[width=0.5\textwidth]{ProcessOverview}
\caption{A process to identify a crowd type from social media}
\label{fig:processOverview}
\end{figure}

From the functional point of view, the process can be implemented into a framework. Figure \ref{fig:frameworkOverview} shows our framework consisting of following components:
\begin{inparaenum}[i)]
\item Context data;
\item Emotion analysis;
\item Emotion model;
\item Crowd model;
\item Emotion - Crowd type mapping model;
\item Rule based reasoning
\end{inparaenum}. Each component will be discussed further in the sections below.

\begin{figure}[htb!] 
\centering    
\includegraphics[width=1.0\textwidth]{FrameworkOverview}
\caption{An overview of the crowd monitoring framework using emotion analysis of social media}
\label{fig:frameworkOverview}
\end{figure}

\section{Context Data}
The first component of the framework is context data component. In our proposed framework, contextual data is gathered from the social media as the information source. Social media is the generic term referring to a wide range of Internet based tools that enable an user to create and share information with each other. These tools include social network services such as Facebook and Twitter, blogs, Internet forums and channels which has marked the beginning of Web 2.0. Unlike other traditional media such as newspaper or television, the content on social media is created by the users, or also known as user-generated content. In different social media, user-generated content can be in various formats such as text, image or video. Because of the fact that the content is being generated by the users themselves, social media is an effective source to obtain the knowledge about the users. In our domain and application of crowd monitoring, the kind of knowledge that is important to capture is the emotional state of the participants in the crowd. 

In our research, we will focus on the use of social media, or Twitter in particular, as the information source for context data, because of following reasons. Firstly, among social media, Twitter is the most commonly used in researches because of its large volume of users and its public APIs which make the data highly accessible. The user-generated content is mostly text-based and in the form of a short message which has no more than 140 characters called tweet. Because of this length limit, a tweet is usually very simple in term of the meaning and each tweet focuses on expressing the idea of the author on one particular topic. This fact makes the a semantic analysis of tweets more feasible in real-time than other content, for example, a long blog article.

A tweet might also contain information beyond the text. A significant number of tweets are geo-tagged, which means they are attached with location information when they are posted to Twitter. This location information can be in the form of exact coordinates if the user posts the tweet from a GPS enabled mobile phone. Alternatively, this location might also be a relative location such as point of interests or town if the user checks in or attaches a place with the tweet.

Another useful information that might exist in a tweet is hashtags. Hashtags are created by the users, and usually are put in a tweet to refer to the topic that is mentioned in the tweet. In some mass gathering events such as the Australia Open or music festivals, there are pre-defined hashtags created for these particular events so that a user can put the hashtags into his tweet when mentioning about the events. Similarly to the geo-location, this information can also be used to filter for tweets belonging to a specific event.

Finally, using Twitter as the information source for crowd monitoring has some certain advantages. Firstly, the data can be collected in real-time, enabling the real-time monitoring which is an essential operation in emergency management because of the dynamic nature of a crowd that it can change from a calm type to an aggressive type \citep{Berlonghi1995}. Secondly, it does not require any pre-installed hardware or software on the participants, which increases the feasibility of our proposed framework.

\section{Emotion Model}

From the literature review, a crowd type can be described as a form of collective behaviour of a group of people in close proximity. The other form of collective behaviour is mass which involves people dispersed in a large area and does not belong to our context of emergency management in mass gathering. Both the Convergence Theory proposed by Allport, Millar and Dollard and the Emergent Norm Theory by Turner and Killian support the idea that a crowd behaviour is formed by people with a common motivation \citep{mcphail1991myth}. In our framework, we emphasize on the emotional factor as the common motivation of the behaviour in the crowd. Different emotions can consequently lead to different crowd behaviours. For example, according to Lofland, a panic exodus from burning theatre is motivated by the fear whereas a race riot is aroused by the anger \citep{Kornblum2011}. Therefore, an emotion model is essential to distinguish different emotions of the people in the crowd.

Human emotion is no doubt complex and confusing \citet{plutchik2001nature}. Therefore, it is difficult even to just list all emotions, not to mention modelling them. However, it is often assumed among theories of emotions that there exists a small set of basic or fundamental emotions, yet there is still little agreement on the number of basic emotions and what emotions are in the list. Based upon the theory of evolution of the biological process, \citet{plutchik2001integration} is able to identify eight basic emotions consisting of four pairs of opposite emotions: anger/fear, joy/sadness, trust/disgust, anticipation/surprise. By looking at facial expression of human, Ekman suggests there are six basic emotions that can be universally recognised, regardless of the language. The six basic emotions are anger, fear, happy, sadness, surprise and disgust, as illustrated in Figure \ref{fig:emotionModel}. This emotion model has been adopted in many researches regarding human emotions \citep{mohammad2014using, roberts2012empatweet,alm2005emotions}. 

\begin{figure}[htb!]
\centering    
\includegraphics[width=0.5\textwidth]{EkmanModel}
\caption{Ekman's six basic emotions}
\label{fig:emotionModel}
\end{figure}

A recent research by \cite{Jack2014} has pointed out the similarity during the early signal of the facial expression between anger and disgust, as well as surprise and fear. For example, both anger and disgust share a wrinkled nose, and both surprise and fear share raised eyebrows. Based on these findings, they suggest only four basic emotions. The reduction in the number of basic emotions helps to simplify the complexity of our emotion model. Therefore, the four basic emotions with anger, fear, happy, sadness will be adopted as our emotion model in the proposed framework.

\section{Emotion Analysis of Social Media}

A recent analysis on the content on Twitter reveals that the users are using Twitter for a variety of purposes, which can be grouped in two main types: updating on themselves or sharing information \citep{java2007we}. Regardless of the content in both cases, a tweet often conveys the author's emotional status \citep{bollen2009modeling}. By capturing the emotion expressed in the text, it is possible to infer the emotional state of the author. In our framework, as can be seen from Figure \ref{fig:processOverview} a tweet can be considered as a raw context data collected from the information source whereas the emotion in the tweet is the high-level context data to be used in later crowd type classification. This transformation from the raw-level to the high-level context data is performed by the emotion analysis component.

There have been several approaches to extract the emotion from Twitter in the literature \citep{roberts2012empatweet, bollen2009modeling, mohammad2012emotional, mohammad2014using}, which have great influence on our method. Our proposed method is based on a combination of Bag-of-Word model, weighting and a simple voting scheme, which will be discussed in the next sections.

\subsection{Bag-of-Word Model}
Bag-Of-Word model is a simple representation of a document which only considers at the frequency of appearance of the words in a document while disregarding the grammar and the order of the words. In our research using Twitter as the corpus, a document is a single tweet and a word is an uni-gram word building up the tweet. The process that split a document into a sequence of words is usually called tokenizer. In our experiment which will be mentioned in Chapter \ref{ch:eval}, the Stanford NLP Tokenizer \footnote{http://nlp.stanford.edu/software/tokenizer.shtml} is applied to tokenize a tweet into words and also to filter out data that is not in our interest, such as URLs and emoticons. 

\begin{figure}[htb!] 
\centering    
\includegraphics[width=0.75\textwidth]{BagOfWord}
\caption{An example of a tweet tokenized into words}
\label{fig:bagOfWord}
\end{figure}

In the Bag-Of-Word representation (Figure \ref{fig:bagOfWord}), the number of occurrence of a word in the tweet contributes to its significance in the tweet. For example, if a word appears twice in the tweet, it will have a doubled weight compared with words with single appearance, thus being more significant. 

The weight of a word represents its association with a specific emotion from the list of four basic emotions mentioned above. Therefore, a word will have four weight scores for each emotions: anger, fear, happy, sadness, which can be illustrated by a proposed ``emotional weight vector'' with four dimensions corresponding to the four emotions. 
\[
	\vec{v_i}(v_1, v_2, v_3, v_4)
\] where \(v_i\) is an emotional weight vector of a word and \(v_{1...4}\) are four dimensions that represent the four emotions.

In conclusion, using the Bag-Of-Word approach, we can consider that a tweet consists of a series of words, each of which has its association with the eight emotions described by an emotional weight vector. The next section will discuss the method to to calculate the ``emotional weight vectors'' \(\vec{v_i}\) of the words and identify the dominating emotion in a tweet.

\subsection{Emotion Word Corpus and Emotional Weight Vector}
Our emotion analysis can be considered as a supervised classification of emotion for a tweet. The analysis requires a collection of words to be gathered and the ``emotional weight vector'' \(\vec{v_i}\) of each word in the collection must be calculated accordingly. Such collection is often referred as the corpus. In order for the calculation of ``emotional weight vector'' to be perform, a corpus of tweets that have been labelled with a correct emotion for each tweet is necessary.

Emotion analysis from text is not a new area in the field of natural language processing. There have been a number of works regarding the construction of text-emotion corpus from various sources such as mails \citep{mohammad2011tracking} and books \citep{mohammad2011once}, newspaper headlines \citep{strapparava2008learning}. Those proposed corpora can be integrated into our framework. However, the language used in a tweet can be significantly different from other text content because of the difference in the usages that a tweet is limited to 140 characters in length and the users mostly use Twitter to update on themselves or to share information. Therefore, only the corpora that are built from Twitter will be of interest to the our crowd monitoring framework.

EmpaTweet proposed by \citet{roberts2012empatweet} is a corpus on Twitter that is annotated with seven emotions: anger, disgust, fear, joy, love, sadness and surprise. Those emotions are taken from Ekman's set of basic emotions plus love as the seventh emotion. The tweets are collected in 14 topics which are chosen in a manner that each topic is expected to evoke a particular emotion in the tweets. Another notable corpus is the NRC Hashtag Emotion corpus, in which tweets are collected by emotion-word hashtags corresponding to Ekman's six emotions: \#anger, \#disgust, \#fear, \#happy, \#sadness and \#surprise and their synonyms\citep{mohammad2012emotional}. The approach used in NRC Hashtag Emotion corpus appears to be more robust as it relies on the self-labelled emotions by the authors rather than the topic-based emotion assumption like EmpaTweet. It is also verified that the self-annotated emotions eventually match the emotions annotated by the judges. Because of this robustness, the NRC Hashtag Emotion corpus is selected as the emotion word corpus in our emotion analysis. The corpus has n tweets and m words.

From the NRC Hashtag Emotion corpus, \citet{mohammad2012emotional} also calculates the association of each word with each of the Ekman's six emotions, which is called Strength of Association (SoA), based on the frequency of occurrence of this word in tweets labelled with a specific emotion. The score is from 0 indicating no association to infinity indicating maximum association. The result is a word emotion lexicon which list all words in the corpus with theirs SoA with the six emotions. This lexicon has been made available to use for research purposes \footnote{http://saifmohammad.com/WebPages/lexicons.html}. In the NRC Hashtag Emotion Lexicon version 2.0, the SoA is calculated to Plutchik's eight emotions. Because the eight emotions proposed by Plutchik also include fear, anger, happy and sadness, this lexicon can be used as the baseline for our calculation of the ``emotional weight vector'' \(\vec{v_i}\). The four emotions are equivalent to the four dimensions of the vector. For each emotion, the SoA score represents the the magnitude of the vector in the corresponding dimension.

From the weight vectors of the words constructing a tweet, the dominating emotion depicted in the tweet can be determined using a voting system which will be discussed in the following section.

\subsection{Voting System and Dominant Emotion}
Because a word can have the different weights in the eight emotions, a tweet consisting of a set of words also consequently possesses its association with the eight emotions. It can be notated as a vector that is summation of the weight vectors of the words constructing the tweet.
\[
	\vec{V} = \sum_{i=1}^{n} \vec{v_i}(v_1, v_2, v_3, v_4)
\]
where \(\vec{V}\) is the summative weight vector of the tweet, \(\vec{v_i}\) is a weight vector of one word and \(n\) is the total number of words in the tweet.

Although a tweet might be associated with all eight emotions, a specific emotion is expected to dominate the whole tweet. In order to extract the dominant emotion in a tweet, we propose following voting system that can interpret the vector as follow. An ``emotional weight vector'' \(\vec{v_i}\) can be considered as a vote cast by a word, that indicates how strongly it agrees with each emotion in list. Similarly, the summative vector \(\vec{V}\) can be interpreted as the overall result of the voting, which illustrates how close a tweet is to each emotion. The dominant emotion can be determined by the highest vote from the voters. In other words, the dimension which has the largest magnitude will be selected as the dominant emotion in the tweet.

\subsection{Emotions in the Crowd}
As illustrated by Figure \ref{fig:processOverview}, the tweets collected in the first stage of the process provides the context at the raw-level about a crowd in a mass gathering. By performing the emotion analysis, the dominant emotion in each tweet can be extracted. This emotion in fact represents the emotion of an individual in the crowd rather than the crowd as a whole. The relationship between individual emotion and group emotion has been discussed in several researches. \citet{barsade1998group} suggest the top-down approach that the group emotion can arise and felt by individual member, while at the same time, in a bottom-up manner the group emotion can be shaped by the compositional effects of individual emotions. This theory confirms the possibility to represent the crowd emotion as whole from the individuals' emotion.

Because of the fact that people with different emotional state can exist in one crowd, we introduce the fuzziness to the representation of emotions in a crowd. The fuzziness allows a crowd to have multiple emotions with a different degree of membership toward each emotion. To measure the degree of membership of a crowd to a specific emotion from the individual emotion of the participants, we propose following method. The degree of membership of a crowd's emotion to emotion \(e_i\) at a given period \(t\) is calculated by below formula.
\[
	\forall e_i \in \{anger, fear, happy, sadness\}: d(e_i)_t = \frac{n(e_i)_t}{N_t}
\]
where \(d(e_i)_t\) is the degree of membership toward emotion \(e_i\), \(N_t\) is the total number of data sampled during \(t\) and \(n(e_i)_t\) is the number of data classified with emotion \(e_i\) among \(N_t\).

This degree of membership \(d(e_i)\) can have any value from 0 to 1, indicating the how close the emotion of the crowd is to \(e_i\) at specific time period \(t\). The calculation of the degrees of membership is performed repetitively with an interval which allows us to detect the change of emotional state of the crowd. The value of \(t\) has influence on the sensitivity of the detection and depends on the sampling rate.

\section{Crowd Model}

The ultimate objective of our crowd monitoring framework is to identify the type of a crowd. Therefore, a crowd model that can describe and differentiate different crowd types is required. From the emergency management point of view, the literature review highlights \citet{Berlonghi1995}'s model as one of the most significant works on crowd types. As mentioned in Chapter \ref{ch:litReview}, \citet{Berlonghi1995} has identified eleven different types of crowd in mass gathering. Each crowd type is described by the movement, participation and behaviour \citep{Zeitz2009}. \citet{Berlonghi1995}'s definition has been widely adopted as the guideline by the emergency bureaus in Australia \citep{EMA1999} and USA \citep{FEMA2005}. Eleven types of crowd are described as below.
\begin{itemize}
\item Ambulatory crowd - is a crowd walking in and out of a venue, to and from parking areas or walking to use restroom or concession facilities.
\item Disability/limited movement crowd - is a crowd of people that in some way are limited or restricted in their movement. Their level or lack of ability to walk, see, hear or speak may require more planning than is provided for all other spectators.
\item Cohesive/spectator crowd is a crowd watching the activities of an event or at the scene of an accident. Its primary character is the fact that people are interested in watching something specific that they came to see.
\item Expressive/revellous crowd - is one involved in some sort of an emotional release which can include cheering, movement in unison, celebrating, dancing, chanting or singing.
\item Participatory crowd - is the crowd of people involved in the actual activities of an event. Sometimes these people may be professional performers or athletes. At other times the people attending the event are participating in an actual sport, such as a marathon. Children may go up onto a stage to perform at the invitation of professional performers.
\item Aggressive/hostile crowd - is one that is becoming verbally aggressive towards or disregarding the instructions of ticket takers, ushers or security personnel. This crowd can get threateningly rowdy and is very open to lawlessness.
\item Demonstrator crowd - is one that is organised to some degree by some established leadership and whose actions may include picketing, marching, chanting or demonstrating at a particular location for a specific purpose.
\item Escaping/trampling crowd - is one that is attempting to escape from danger either of an actual or imagined threat to life. This includes a crowd involved in an organised evacuation procedure and a panic mob pushing and shoving with no order whatsoever.
\item Dense/suffocating crowd - is one in which individual physical movement is rapidly becoming less likely or impossible due to the density of the crowd. People are attempting to move,but they are either swept along with the movement of the crowd or are falling on top of each other. The results of this compression of people are fatalities and serious injuries due to suffocation.
\item Rushing/looting crowd - is one whose principal purpose is to obtain, acquire or steal something. This includes rushing to get the most preferred seats, autographs or actually stealing property. This very often results in fatalities, serious injuries and considerable property damage.
\item Violent crowd - is a crowd that is attacking, terrorising and rioting with complete disregard for laws and the rights of others.
\end{itemize}
However, relying only on the description, it is difficult to make distinct of different crowd types without human observation and judgement on the spot. Therefore, there is a need to introduce attributes or features to the existing model for a systematic approach to perform the classification of crowd type. In this proposal framework, the four basic emotions: anger, fear, happy and sadness are introduced as the features of \citet{Berlonghi1995}'s crowd types. The next section focuses on how the mapping between each crowd type and its associated emotion is constructed.

\section{Emotion - Crowd Type Mapping Model}
In the previous sections, we have discussed the possibility to detect the emotions in a crowd. In our approach, anger, anticipation, joy, trust, fear, surprise, sadness and disgust are used as the eight features of a crowd type. This section will explore further into the relationship between each crowd type and each emotion. Our mapping is based on \citet{Plutchik1980}'s psychoevolutionary theory of emotion which explains emotion as a apart of evolutionary process. According to this theory, the emotional process can be modelled by a sequential model which starts with stimulus events. Based on the interpretation or cognition of these events, humans feel the emotions accordingly. The feeling state of emotion then triggers the overt behaviours or actions to achieve a desired effect. Table \ref{table:sequentialModelOfEmotion} presents the primitive sequential model of emotional process.

\begin{table}
\caption{Sequential model of the emotional process}
\label{table:sequentialModelOfEmotion}
\begin{tabular}{|p{2.5cm}|p{2.5cm}|p{2cm}|p{2cm}|p{4.5cm}|}
\hline
\textbf{Stimulus events} & \textbf{Coginition} & \textbf{Emotion} & \textbf{Behaviour} & \textbf{Effect} \\
\hline
Threat & Danger & Fear & Escape & Safety \\
\hline
Obstacle & Enemy & Anger & Attack & Destroy obstacle \\
\hline
Gain of valued object & Possess & Joy & Retain or repeat & Gain resources or new genes \\
\hline
Loss of valued object & Abandonment & Sadness & Cry & Reattach with lost object \\
\hline
Member of a group & Friend & Acceptance (Trust) & Groom & Mutual support \\
\hline
Unpalatable object & Poison & Disgust & Vomit & Eject poison \\
\hline
New territory & Examine & Expectation (Anticipation) & Map & Knowledge of territory \\
\hline
Unexpected event & What is it & Surprise & Stop & Gain time to orient \\
\hline
\end{tabular}
\end{table}

In one of his works, \citet{plutchik2001integration} has also summarised the relationship between emotions and their derivatives including their behaviour language, functional language and trait language. The functional language presents the pattern of adaptation to the stimulus event while the behaviour language can describe the actual actions that are derived from a specific emotion. The trait language refers to the personality that is related to that emotion. For example, fear can trigger the escaping action, for the course of protection and it is caused by timidity. Table \ref{table:derivationOfEmotion} shows the derivation of the eight emotions.

\begin{table}
\caption{Emotions and their derivatives}
\label{table:derivationOfEmotion}
\begin{tabular}{|p{5cm}|p{3cm}|p{3cm}|p{3cm}|}
\hline
\textbf{Emotion} & \textbf{Behaviour language} & \textbf{Functional language} & \textbf{Trait language} \\
\hline
Fear & Escape & Protection & Timid \\
\hline
Anger & Attack & Destruction & Quarrelsome \\
\hline
Joy & Mate & Reproduction & Sociable \\
\hline
Sadness & Cry & Reattachment & Gloomy \\
\hline
Acceptance (Trust) & Groom & Incorporation & Trusting \\
\hline
Disgust & Vomit & Rejection & Hostile \\
\hline
Expectation (Anticipation) & Map & Exploration & Demanding \\
\hline
Surprise & Stop & Orientation & Indecisive \\
\hline
\end{tabular}
\end{table}

Although the psychoevolutionary theory is based on the basic emotions and the their very primitive stimuli and derivative behaviours, it can be applied to our context of modern crowd. A crowd type that we can observe can be both the stimulus events triggering the emotions or the overt behaviours triggered by the emotions. Therefore, in order to construct the emotion - crowd type mapping, a comprehensive understanding of the behaviour of each crowd type is needed. The description of the each crowd type by \citet{Berlonghi1995} is analysed together with the definition of similar crowd types defined by other scholars. We will extract the behaviour language and trait language from those descriptions and attempt to map them back to the potential emotions of the crowd. 

****** REVISED PART ******

For each emotion, we also define three level which are low, medium and high to represent different levels of intensity of that emotion. 

\begin{itemize}
\item Ambulatory crowd - is described by the walking action and calmness \citep{Zeitz2009}. This calmness potentially indicates a low intensity in all emotions.
\item Disablity/Limited movement crowd - is described by the immobility of the crowd. Similarly to the ambulatory crowd, this characteristic does not suggest any significant emotion.	
\item Cohesive/Spectator - is described by the activity watching a specific event and the fact that people have the interest in watching the event. Being interested is a low extreme form of anticipation. The watching action is attracted by the unexpected things occurred the event, which causes surprise. According to \citet{Lofland1985}'s typology of collective behaviour, joy can appear in the crowd in such events as rock concerts and sport events. Therefore, this crowd type might have medium level of anticipation and joy and surprise.
\item Expressive/Revellous crowd - is described by the emotional release. This action is caused by the high intensity of joy.
\item Participatory crowd - is described by the participating action in a specific event. Similarly to the spectator type, this crowd type might be motivated by the joy and anticipation. In a participatory crowd, there is a considerable psychological unity, which suggests the level of intensity of trust is high.
\item Aggressive/Hostile crowd - is described by the verbal aggressiveness and disregard for instruction. Aggressiveness is caused by anger while disregard is a form of rejection. The aggressiveness is limited by verbal expression, which indicates that the intensity of anger is medium in this crowd type. Because of the disregard attitude of the member in the crowd, the disgust level is medium.
\item Demonstrator - including such actions as picketing, marching, protesting is a result of the rejection against something, which is motivated by the disgust. Research in protest shows that the primary emotions in a protest can potentially include anger, trust, sorrow, fear and even joy \citep{jasper1998emotions}. Therefore, the demonstrator crowd might have high level of disgust while having medium intensity of fear, anger joy and sadness.
\item Escaping/Trampling crowd - is described by the escaping action from a danger or a threat. This behaviour is the result of fear, therefore the crowd type must have high intensity of fear. This is also fully matched with \citet{Lofland1985}'s typology that fear motivates the panic escaping crowd.
\item Dense/Suffocating crowd - is described by the high density and incapability of moving in the crowd. The state of getting swept by the crowd might cause fear and despair. Therefore, there is a medium level of fear and sadness in this crowd type.
\item Rushing/Looting crowd - is described by the purpose to obtain, acquire and steal something. These actions belong to the gain of value stimulus which will trigger the joy. On the other hand, the desire for such value is originated from the demand, which triggers the anticipation. Therefore, the level of joy and anticipation must be high in this case. In a looting, the crowd lacks the unity and order, but rather consists of acquisitive or opportunistic individual acting for their own demand. This indicates the medium level of disgust.
\item Violent crowd - is described by the attacking, terrorising and rioting action with the complete disregard for laws and other people. Attacking is a typical behaviour motivated by anger while disregard is caused by disgust. As a result, the intensity of anger in the crowd must be extremely high while disgust also is high because laws and other people's rights are completed ignored.
\end{itemize}

Other emotions which are not described in the explanation should be given the default rate as low. Table \ref{table:mappingEmotionCrowdType} summarises the relationship between a crowd type and the eight basic emotions.

\begin{table}
\caption{Mapping between crowd types and emotions}
\label{table:mappingEmotionCrowdType}
\begin{tabular}{|p{2cm}|p{1.2cm}|p{2cm}|p{1.2cm}|p{1.2cm}|p{1.2cm}|p{1.2cm}|p{1.2cm}|p{1.2cm}|}
\hline
\textbf{Crowd type} & \textbf{Anger} & \textbf{Anticipation} & \textbf{Joy} & \textbf{Trust} & \textbf{Fear} & \textbf{Surprise} & \textbf{Sadness} & \textbf{Disgust} \\
\hline
Ambulatory & low & low & low & low & low & low & low & low \\
\hline
Disability / Limited movement & low & low & low & low & low & low & low & low \\
\hline
Cohesive / Spectator & low & medium & medium & low & low & medium & low & low \\
\hline
Expressive / Revellous & low & low & high & low & low & low & low & low \\
\hline
Participatory & low & medium & medium & high & low & low & low & low \\
\hline
Aggressive / Hostile & medium & low & low & low & low & low & low & medium \\
\hline
Demonstrator & medium & low & medium & low & low & low & medium & high \\
\hline
Escaping & low & low & low & low & high & low & low & low \\
\hline
Dense / Suffocating	& low & low & low & low & medium & low & medium & low \\
\hline
Rushing	/ Looting & low & high & high & low & low & low & low & medium \\
\hline
Violent	& high & low & low & low & low & low & low & high \\
\hline
\end{tabular}
\end{table}

****** END OF REVISED PART ******

\section{Rule Based Reasoning}

\subsection{Fuzzifier}
As introduced in the previous section, the emotions in the crowd are measured by the degrees of membership \(d(e_i)\) in the form of of numerical values between 0 and 1. In our mapping above, we use linguistic labels such as low, medium and high to describe the intensify of each emotion. Fuzzifier is the component converting the discrete numerical values into categorical values used in fuzzy logic. 

Firstly, the meaning of linguistic labels must be defined. Low, medium and high represent the three levels of intensity of an emotion. The intensity increase with the higher of the level. Secondly, there are certain points in the degree of membership that the intensity of an emotion changes from low level to medium level and from medium level to high level. These two points are defined as threshold \(th_1\) and \(th_2\) respectively. The conversion from crisp values of the degree of membership to linguistic label can be performed by following rules.
\[
d(e_i) \leq th_1(e_i) \Rightarrow label = low
\]
\[
d(e_i) > th_1(e_i) \land d(e_i) < th_2(e_i) \Rightarrow label = medium
\]
\[
d(e_i) \geq th_2(e_i) \Rightarrow label = high
\]
The thresholds are important to detect the abnormal increasing in one particular emotion. Firstly, because of the fact that people post unequal number of tweets in each emotion as their normal behaviour, the thresholds can be not the same for different emotions. Secondly, because of the cultural difference, the content shared on Twitter is very different across different countries and cultures. People in one country might normally post more happy content than people living in a problematic region. Moreover, even among the group of users, emotional content can also vary during different period. For example, people tend to tweet more happy content than usual around Christmas and New Year holiday. Therefore, the choice of the two thresholds for one emotion, such as happy, actually depend on the region and time. In our experiment, we propose an approach to calculate the thresholds for our experimental dataset that is collected in one specific event in the past.

\subsection{Rule Repository}

list 11 rules here for 11 crowd types

\subsection{Inference Engine}

Fuzzy rule here and the mathematical formula here

\section{Conclusion}